# project

### dialogs
- Dialogs.kt: 提供清除过滤器、清空队列、清除收藏等各类确认对话框的工具类。
- FavoritesAdapter.kt: 定义收藏列表适配器的 getItemCount 方法，返回收藏数量。
- NowPlaying.kt: 展示当前播放音乐信息并提供播放控制、音量调节等功能的底部弹窗。
- QueueAdapter.kt: 处理播放队列歌曲列表的RecyclerView适配器，负责绑定歌曲数据、显示当前播放歌曲高亮、处理歌曲点击播放及删除逻辑。
- RecyclerSheet.kt: 提供更新倒计时文本的方法，用于底部弹窗中的睡眠定时器显示。

### equalizer
- EqualizerActivity.kt: 继承BaseActivity，初始化均衡器视图绑定，设置主题，处理系统窗口适配（边缘到边缘），并配置返回键回调以结束任务的Activity。
- EqualizerFragment.kt: 实现音频均衡器功能，支持调节频段、低音增强、虚拟化效果及预设选择的Fragment。

### extensions
- MusicExts.kt: 定义Long类型扩展函数toFormattedDuration，用于将毫秒数格式化为不同形式的时长字符串。
- ViewExts.kt: 定义了视图动画、布局调整、菜单设置等多种视图相关的扩展函数。

### fragments
- AllMusicFragment.kt: 展示所有音乐列表，支持搜索、排序及随机播放功能的Fragment。
- DetailsFragment.kt: 处理音乐详情展示，包括歌曲列表、专辑信息及相关交互逻辑的Fragment。
- ErrorFragment.kt: 用于显示无音乐文件、SD卡未就绪等错误状态的Fragment。
- MusicContainersFragment.kt: 提供获取艺术家、文件夹、专辑视图中子标题的函数。

### models
- Album.kt: 定义Album数据类，包含专辑标题、年份、音乐列表及总时长属性的模型类。
- Music.kt: 定义Music数据类，包含艺术家、时长、专辑等音乐相关属性。
- NotificationAction.kt：定义了包含first和second两个String属性的数据类，用于存储通知相关的动作配置信息。
- SavedEqualizerSettings.kt：定义了包含enabled、preset、bandsSettings、bassBoost、virtualizer属性的数据类，用于存储均衡器的配置信息。
- Sorting.kt：定义了包含albumOrFolder、launchedBy、songVisualization、sorting属性的数据类，用于存储排序相关的配置信息。

### player
- MediaButtonReceiver.kt：媒体按钮广播接收器。接收媒体按钮事件，当存在当前播放歌曲时，调用MediaPlayerHolder的方法处理这些事件（如播放/暂停、上一曲/下一曲等）。
- MediaPlayerHolder.kt：核心的媒体播放器管理类。实现了MediaPlayer的多种回调接口（错误、完成、准备等），负责媒体播放器的初始化、播放、暂停、跳过（上一曲/下一曲）、重复播放、进度更新等控制；管理音频焦点的获取与释放；处理均衡器、低音增强器等音频效果；管理睡眠定时器；更新媒体会话元数据；与服务和通知管理器交互，处理播放状态变化对UI和通知的影响等。
- MediaPlayerInterface.kt：媒体播放器接口。定义了一系列回调方法，用于通知UI播放位置变化、状态变化、关闭、重复状态更新、队列状态变化、睡眠定时器更新等事件。
- MediaPlayerUtils.kt：媒体播放器工具类。提供安全操作媒体播放器的方法，如安全暂停（避免IllegalStateException）、安全播放、安全设置播放速度（处理异常情况）等。
- MusicNotificationManager.kt：负责音乐播放通知的管理。包括创建通知渠道、构建通知（设置内容意图、分类、优先级、操作按钮等）、更新通知内容（歌曲信息、播放状态等）、处理通知动作（如播放/暂停、上一曲、下一曲、收藏、重复等按钮的更新），以及创建错误通知等。
- PlayerService.kt：音乐播放服务类。通过Binder提供服务接口，管理媒体会话（配置回调处理播放、暂停、跳过等操作）；处理媒体按钮事件和各种播放相关的意图；管理唤醒锁以保持播放；初始化通知管理器；在服务销毁时保存播放状态和设置；包含内部广播接收器处理媒体意图等。
- TileService.kt：瓷砖服务类。点击时启动主活动（MainActivity），并传递特定的启动参数（标识由瓷砖启动），同时折叠通知面板。

### preferences
- AccentsAdapter.kt：RecyclerView适配器，展示可选主题强调色，处理选中状态切换和长按提示。
- ActiveTabsAdapter.kt：RecyclerView适配器，管理活跃标签的显示、选择、状态切换及数量限制（不少于2个）。
- ContextUtils.kt：提供上下文工具方法，支持更新应用语言设置和获取排序后的支持语言列表。
- FiltersAdapter.kt：RecyclerView适配器，管理过滤项的展示、选中状态及移除操作，提供更新后项目集合。
- NotificationActionsAdapter.kt：RecyclerView适配器，展示预设通知动作组合，处理选中状态切换并保存到偏好设置。
- PreferencesFragment.kt：偏好设置Fragment，加载偏好资源，处理偏好点击和变化事件，关联界面和媒体控制接口。
- SettingsFragment.kt：设置界面Fragment，含搜索工具栏，加载偏好子碎片，处理GitHub页面打开和语言切换功能。

### ui
- ItemSwipeCallback.kt：处理RecyclerView条目滑动事件，定义滑动时的视觉效果（背景、图标）及滑动后的回调逻辑的类。
- ItemTouchCallback.kt：处理RecyclerView条目拖拽排序、移动等触摸交互，控制移动条件和数据源更新的类。
- MainActivity.kt：音乐播放器应用的主活动，统筹管理界面导航、碎片切换、媒体控制接口初始化及与播放服务交互。
- MediaControlInterface.kt：定义媒体控制相关的回调方法接口，包含歌曲选择、队列管理、播放速度切换等操作。
- SingleClickHelper.kt：防止短时间内重复点击的工具类，通过控制点击时间间隔确保单次点击有效。
- UIControlInterface.kt：定义UI控制相关的回调方法接口，处理外观变化、页面跳转、数据筛选等交互和状态变化。

### utils
- Lists.kt：提供列表过滤、排序及相关偏好设置（如收藏、隐藏项目）的工具类。
- MusicUtils.kt：处理音乐专辑查询、歌曲列表构建、媒体播放器列表更新等音乐相关操作的工具类。
- Permissions.kt：管理存储权限的判断、请求及权限说明对话框展示的工具类。
- Popups.kt：提供歌曲相关弹出菜单、播放速度选择菜单的展示及交互处理的工具类。
- Theming.kt：处理主题切换、颜色与图标资源获取、屏幕方向设置等主题相关功能的工具类。
- Versioning.kt：用于判断当前Android设备系统版本是否达到或超过特定版本（如Q、Tiramisu）的工具类。

### the rest(Application core basic components and data management code)
- BaseActivity.kt：作为应用中其他Activity的基类，提供状态栏颜色设置和上下文本地化配置功能。
- GoApp.kt：应用入口类，初始化偏好设置和默认夜间模式，提供自定义的Coil图像加载器配置。
- GoConstants.kt：集中定义应用中使用的各类常量，包括权限请求码、标签页标识、排序方式等。
- GoPreferences.kt：管理应用偏好设置，通过SharedPreferences和Moshi实现基本数据及复杂对象的存储与读取。
- MusicViewModel.kt：管理音乐播放器的音乐数据，处理音乐获取、过滤、分组及偏好设置更新的ViewModel类。
